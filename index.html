<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARC Script Hub</title>
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #121212; color: white; text-align: center; margin: 0; padding: 0; }
        .container { max-width: 600px; margin: 50px auto; background: #1e1e1e; padding: 20px; border-radius: 15px; box-shadow: 0px 4px 10px rgba(255, 255, 255, 0.1); }
        h1 { margin-bottom: 20px; }
        input { width: calc(100% - 20px); padding: 12px; margin-bottom: 15px; border: none; border-radius: 8px; background: #2a2a2a; color: white; font-size: 16px; outline: none; }
        .script { background: #252525; padding: 15px; margin: 8px 0; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; transition: transform 0.2s; }
        .script.premium { background: #3a2f4a; }
        .script:hover { transform: scale(1.02); }
        .copy-btn { background: #008CBA; color: white; border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 14px; transition: background 0.2s; }
        .copy-btn:hover { background: #0078a0; }
        #login-container { margin-bottom: 20px; }
        #script-container { display: block; }
        .login-btn, .logout-btn { background: #008CBA; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-size: 16px; width: 100%; margin-top: 10px; }
        .login-btn:hover, .logout-btn:hover { background: #0078a0; }
        #user-status { margin-bottom: 20px; font-size: 14px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ARC Script Hub</h1>
        <div id="login-container">
            <div id="user-status">Not logged in (Premium scripts hidden)</div>
            <input type="text" id="username" placeholder="Username">
            <input type="password" id="password" placeholder="Password">
            <button class="login-btn" onclick="login()">Login</button>
            <button class="logout-btn" onclick="logout()" style="display: none;">Logout</button>
        </div>
        <div id="script-container">
            <input type="text" id="search" placeholder="Search scripts..." onkeyup="searchScripts()">
            <div id="script-list"></div>
        </div>
    </div>

    <script>
        let isLoggedIn = false;

        window.onload = function() {
            fetchScripts();
        };

        function login() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            const loginJsonUrl = "https://raw.githubusercontent.com/MaxiEliteExecutor/SaturnXHub/refs/heads/main/users.json";

            console.log("Attempting login with:", username, password);
            fetch(loginJsonUrl)
                .then(response => {
                    if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                    return response.json();
                })
                .then(data => {
                    console.log("Fetched users:", data);
                    const user = data.users.find(u => u.username === username && u.password === password);
                    if (user) {
                        isLoggedIn = true;
                        document.getElementById("user-status").textContent = `Logged in as ${username}`;
                        document.getElementById("username").style.display = "none";
                        document.getElementById("password").style.display = "none";
                        document.querySelector(".login-btn").style.display = "none";
                        document.querySelector(".logout-btn").style.display = "block";
                        fetchScripts();
                    } else {
                        alert("Invalid username or password!");
                    }
                })
                .catch(error => {
                    console.error("Login error:", error);
                    alert("Failed to validate login: " + error.message);
                });
        }

        function logout() {
            isLoggedIn = false;
            document.getElementById("user-status").textContent = "Not logged in (Premium scripts hidden)";
            document.getElementById("username").style.display = "block";
            document.getElementById("password").style.display = "block";
            document.querySelector(".login-btn").style.display = "block";
            document.querySelector(".logout-btn").style.display = "none";
            document.getElementById("username").value = "";
            document.getElementById("password").value = "";
            fetchScripts();
        }

        function copyScript(script) {
            navigator.clipboard.writeText(script).then(() => {
                alert('Script copied to clipboard!');
            });
        }

        function searchScripts() {
            let input = document.getElementById("search").value.toLowerCase();
            let scripts = document.querySelectorAll(".script");
            scripts.forEach(script => {
                let text = script.textContent.toLowerCase();
                script.style.display = text.includes(input) ? "flex" : "none";
            });
        }

        function fetchScripts() {
            const githubJsonUrl = "https://raw.githubusercontent.com/MaxiEliteExecutor/SaturnXHub/refs/heads/main/scripts.json";
            console.log("Fetching scripts from:", githubJsonUrl);
            fetch(githubJsonUrl)
                .then(response => {
                    if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                    return response.json();
                })
                .then(data => {
                    console.log("Fetched scripts:", data);
                    const scriptList = document.getElementById("script-list");
                    scriptList.innerHTML = "";
                    data.scripts.forEach(script => {
                        if (isLoggedIn || !script.premium) {
                            const scriptDiv = document.createElement("div");
                            scriptDiv.className = `script ${script.premium ? 'premium' : ''}`;
                            scriptDiv.innerHTML = `
                                <p>${script.name}${script.premium ? ' (Premium)' : ''}</p>
                                <button class="copy-btn" onclick="copyScript('${script.code}')">Copy</button>
                            `;
                            scriptList.appendChild(scriptDiv);
                        }
                    });
                })
                .catch(error => {
                    console.error("Error fetching scripts:", error);
                    alert("Failed to load scripts: " + error.message);
                });
        }
    </script>
</body>
</html>
